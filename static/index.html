<table id="table" border="1">
<tr>
    <th>podName</th>
    <th>Branch</th>
    <th>pullRequestID</th>
    <th>CPU</th>
    <th>MEM</th>
    <th>Storage</th>
</tr>

</table>
<script>
  const table = document.getElementById("table");
  const ev = new EventSource('/usage?organization=gantry-sample&span=1');
  ev.onmessage = function(event) {
    let data = JSON.parse(event.data)
    
    if (!data.isDisable){
        console.log(disabled);
    }

    // Clear the table
    // th以外の行を削除
    while (table.rows.length > 1) {
        table.deleteRow(1);
    }
    

    for (let i = 0; i < data.usages.length; i++) {
        let row = table.insertRow(-1);
        let cell1 = row.insertCell(0);
        let cell2 = row.insertCell(1);
        let cell3 = row.insertCell(2);
        let cell4 = row.insertCell(3);
        let cell5 = row.insertCell(4);
        let cell6 = row.insertCell(5);
        cell1.innerHTML = data.usages[i].podName;
        cell2.innerHTML = data.usages[i].branch;
        cell3.innerHTML = "#"+data.usages[i].pullRequestID;
        cell4.innerHTML = data.usages[i].cpu;
        cell5.innerHTML = data.usages[i].memory;
        cell6.innerHTML = data.usages[i].storage;
    }

  };
</script>